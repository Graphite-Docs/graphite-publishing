!function(e,t){if("function"==typeof define&&define.amd)define(["exports"],t);else if("undefined"!=typeof exports)t(exports);else{var n={exports:{}};t(n.exports),e.jstoxml=n.exports}}(this,function(e){"use strict";function t(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=["_selfCloseTag","_attrs"],i=new RegExp(o.join("|"),"g"),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.repeat(t)},c=function(e){return Array.isArray(e)&&"array"||"object"===(void 0===e?"undefined":r(e))&&null!==e&&e._name&&"special-object"||e instanceof Date&&"date"||null===e&&"null"||(void 0===e?"undefined":r(e))},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new RegExp("("+Object.keys(t).join("|")+")","g");return String(e).replace(n,function(e,n){return t[n]||""})},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return Array.isArray(e)?e.map(function(e){var n=Object.keys(e)[0],r=e[n],o=t?u(r,t):r;return""+n+(!0===o?"":'="'+o+'"')}):Object.keys(e).map(function(n){var r=t?u(e[n],t):e[n];return""+n+(!0===e[n]?"":'="'+r+'"')})},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=s(e,t);return 0===n.length?"":" "+n.join(" ")},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map(function(t){return{_name:t,_content:e[t]}})},d=["string","number","boolean","date","special-object"],v=function(e){return d.includes(c(e))},p=function(e){return!e.match("<")},b=function(e){var t=e.header,n=e.indent,o=(e.depth,e.isOutputStart);return t&&o?("boolean"===(void 0===t?"undefined":r(t))?'<?xml version="1.0" encoding="UTF-8"?>':t)+(n?"\n":""):""},y=e.toXML=function e(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},y=d.depth,h=void 0===y?0:y,m=d.indent,g=d._isFirstItem,_=(d._isLastItem,d.attributesFilter),j=d.header,O=d.filter,k=a(m,h),x=c(s),A=v(s),S=0===h&&(A||!A&&g),I="";switch(x){case"special-object":var F=s._name,L=s._content;if(null===L){I=F;break}if(F.match(i))break;var w=e(L,n({},d,{depth:h+1})),T=c(w),C=p(w),E=""+(m&&!S?"\n":"")+k,M="undefined"===T||""===w,P="boolean"===r(s._selfCloseTag)?M&&s._selfCloseTag:M,R=P?"/":"",X="<"+F+f(s._attrs,_)+R+">",D=m&&!C?"\n"+k:"";I=""+E+X+(P?"":""+w+D+"</"+F+">");break;case"object":var U=Object.keys(s);I=U.map(function(r,i){var a=n({},d,{_isFirstItem:0===i,_isLastItem:i+1===U.length}),u={_name:r};if("object"===c(s[r])&&(o.forEach(function(e){var t=s[r][e];void 0!==t&&(u[e]=t,delete s[r][e])}),void 0!==s[r]._content&&Object.keys(s[r]).length>1)){var f=Object.assign({},s[r]);delete f._content,u._content=[].concat(t(l(f)),[s[r]._content])}return void 0===u._content&&(u._content=s[r]),e(u,a)},d).join("");break;case"function":var q=s(d);I=e(q,d);break;case"array":I=s.map(function(t,r){var o=n({},d,{_isFirstItem:0===r,_isLastItem:r+1===s.length});return e(t,o)}).join("");break;default:I=u(s,O)}return""+b({header:j,indent:m,depth:h,isOutputStart:S})+I};e.default={toXML:y}});